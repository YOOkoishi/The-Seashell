<!--
    此 HTML 会在网络服务系统的登录页显示。
    使用正则 var\s*checkcode\s*=\s*\"(\d+)\" 即可获取默认验证码答案。
    使用正则 var\s*trytimes\s*=\s*"(\d+|null)" 即可获取本设备已登录失败的次数。
    使用正则 if\s*\(parseInt\(trytimes\)\s*>=\s*(\d\+)\s*\) 即可得知失败次数阈值。
    如果失败次数满足该阈值，则默认验证码失效，需要解决一个额外的验证码。
-->

<!DOCTYPE html
    PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html>

<head>
    <title>User Self-Service System</title>
    <!-- 001pubtags=用户自助服务系统 -->
    <meta http-equiv="pragma" content="no-cache" />
    <meta http-equiv="cache-control" content="no-cache" />
    <meta http-equiv="expires" content="0" />
    <link rel="stylesheet" type="text/css" skinResource="css/login.css" skin="true" />
    <script type="text/javascript" src="js/md5.js"></script>
    <script type="text/javascript" src="js/jquery-1.6.js"></script>
    <script type="text/javascript" src="js/random.js"></script>
    <script type="text/javascript" src="js/jqueryCookie.js"></script>
    <script type="text/javascript" src="js/skin.js"></script>
    <script type="text/javascript">
        function check() {
            var account = document.getElementById("account");
            var pass = document.getElementById("pass");
            var radomcode = document.getElementById("radomcode");
            var name = account.value;
            var names = name.replace(/(^\s*)|(\s*$)/g, "");
            if (names == null || names == "") {
                alert("Account is empty!"); //0001_login.jsp=账号为空请正确填写！
                account.focus();
                return false;
            }
            var password = pass.value;
            var passwords = password.replace(/(^\s*)|(\s*$)/g, "");
            if (passwords == null || passwords == "") {
                alert("Password is empty!"); //0002_login.jsp=密码为空请正确填写！
                pass.focus();
                return false;
            }
            var code = radomcode.value;
            codes = code.replace(/(^\s*)|(\s*$)/g, "");
            if (!$("#tr_random").is(":hidden")) {
                if (codes == null || codes == "") {
                    alert("Code is empty!"); //0003_login.jsp=随机码为空请正确填写！
                    radomcode.focus();
                    return false;
                }
            }
            $("#pass").val(calcMD5($("#pass").val()));

            loginRandom = "jihvjn224324";
        }
        $(document).ready(function () {
            loadimage();
            $("#fielderror1").html($("#fielderror2").text());
        });

        function questionlogin() {
            var account = document.getElementById("account");
            var name = account.value;
            var names = name.replace(/(^\s*)|(\s*$)/g, "");
            if (names == null || names == "") {
                alert("Account is empty!"); //0001_login.jsp=账号为空请正确填写！
                account.focus();
                return;
            }
            window.location.href = "nav_QuestionLogin?account=" + name;
        }

        $(document).ready(function () {
            var checkcode = "7531";
            $("#checkcode").val(checkcode);

            var trytimes = "null";

            if (parseInt(trytimes) >= 3) {
                $("#tr_random").show();
            }
        });
    </script>
</head>

<body style="display: none">
    <div class="body2">
        <div class="l_outbox">
            <div class="top_space"></div>
            <div class="l_logo"></div>
            <div class="l_content">
                <div class="content">
                    <div class="tabcontent">
                        <form name="loginform" method="post" action="LoginAction.action" id="loginform"
                            onsubmit="return check();">
                            <div class="e-space"></div>
                            <div class="redtext">
                                <div style="width: 350px" id="fielderror1"></div>
                                <div id="fielderror2" style="display: none"></div>
                            </div>
                            <div class="row" style="margin-top: 10px">
                                <label>Account</label><!-- 0004_login.jsp=账号 -->
                                <input type="text" name="account" id="account" value="" size="25" class="text"
                                    tabindex="1" />
                            </div>
                            <div class="row">
                                <label>Password</label><!-- 0005_login.jsp=密码 -->
                                <input type="password" name="password" id="pass" value="" size="25" class="text"
                                    onfocus="this.value = '';" tabindex="2" />
                            </div>
                            <div class="row" style="display: none" id="tr_random">
                                <label>Code</label><!-- 0007_login.jsp=验证码 -->
                                <input type="text" name="code" id="radomcode" value="" size="4" class="text"
                                    style="width: 60px" tabindex="3" />
                                <input type="text" name="checkcode" id="checkcode" style="display: none" />
                                <img id="codeimage" align="absbottom" />
                                <a href="javascript: loadimage();" tabindex="6">
                                    <font class="rowtext">Change Image</font>
                                </a><!-- 0008_login.jsp=看不清？换一张 -->
                            </div>
                            <div class="row">
                                <label>&nbsp;</label>
                                <input type="submit" name="Submit" class="but" value="Login"
                                    tabindex="4" /><!-- 0010_login.jsp=登 录 -->
                            </div>
                            <div class="s_text">Power by CITYHOTSPOT</div>
                        </form>
                    </div>
                </div>
            </div>
        </div>
    </div>
</body>

</html>
